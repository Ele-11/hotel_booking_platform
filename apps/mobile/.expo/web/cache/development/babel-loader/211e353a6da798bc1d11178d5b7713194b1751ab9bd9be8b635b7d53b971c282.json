{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport { Calendar } from 'react-native-calendars';\nimport { styles } from \"./index.styles\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Calendar_My = function Calendar_My() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isCalendarVisible = _useState2[0],\n    setIsCalendarVisible = _useState2[1];\n  var _useState3 = useState('2024-05-01'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    startDate = _useState4[0],\n    setStartDate = _useState4[1];\n  var _useState5 = useState('2024-05-03'),\n    _useState6 = _slicedToArray(_useState5, 2),\n    endDate = _useState6[0],\n    setEndDate = _useState6[1];\n  var _useState7 = useState({}),\n    _useState8 = _slicedToArray(_useState7, 2),\n    markedDates = _useState8[0],\n    setMarkedDates = _useState8[1];\n  var onDayPress = function onDayPress(day) {\n    if (!startDate || startDate && endDate) {\n      setStartDate(day.dateString);\n      setEndDate('');\n      setMarkedDates(_defineProperty({}, day.dateString, {\n        startingDay: true,\n        color: '#007AFF',\n        textColor: 'white',\n        selected: true\n      }));\n    } else {\n      if (day.dateString < startDate) {\n        setStartDate(day.dateString);\n        return;\n      }\n      setEndDate(day.dateString);\n      var range = {};\n      var start = new Date(startDate);\n      var end = new Date(day.dateString);\n      setMarkedDates(_defineProperty(_defineProperty({}, startDate, {\n        startingDay: true,\n        color: '#007AFF',\n        textColor: 'white'\n      }), day.dateString, {\n        endingDay: true,\n        color: '#007AFF',\n        textColor: 'white'\n      }));\n      setTimeout(function () {\n        return setIsCalendarVisible(false);\n      }, 300);\n    }\n  };\n  var getNights = function getNights() {\n    if (!startDate || !endDate) return 1;\n    var start = new Date(startDate);\n    var end = new Date(endDate);\n    return Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n  };\n  return _jsxs(View, {\n    children: [_jsxs(TouchableOpacity, {\n      style: styles.dateRow,\n      onPress: function onPress() {\n        return setIsCalendarVisible(true);\n      },\n      children: [_jsxs(View, {\n        style: styles.dateItem,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"\\u5165\\u4F4F\"\n        }), _jsx(Text, {\n          style: styles.dateText,\n          children: startDate.substring(5)\n        })]\n      }), _jsx(View, {\n        style: styles.nightBadge,\n        children: _jsxs(Text, {\n          style: styles.nightText,\n          children: [getNights(), \"\\u665A\"]\n        })\n      }), _jsxs(View, {\n        style: styles.dateItem,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"\\u79BB\\u5E97\"\n        }), _jsx(Text, {\n          style: styles.dateText,\n          children: endDate ? endDate.substring(5) : '请选择'\n        })]\n      })]\n    }), _jsx(Modal, {\n      visible: isCalendarVisible,\n      animationType: \"slide\",\n      children: _jsxs(View, {\n        style: {\n          flex: 1,\n          paddingTop: 50\n        },\n        children: [_jsxs(View, {\n          style: styles.modalHeader,\n          children: [_jsx(Text, {\n            style: styles.modalTitle,\n            children: \"\\u9009\\u62E9\\u5165\\u79BB\\u65E5\\u671F\"\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return setIsCalendarVisible(false);\n            },\n            children: _jsx(Text, {\n              children: \"\\u5173\\u95ED\"\n            })\n          })]\n        }), _jsx(Calendar, {\n          markingType: 'period',\n          markedDates: markedDates,\n          onDayPress: onDayPress,\n          minDate: new Date().toISOString().split('T')[0],\n          theme: {\n            selectedDayBackgroundColor: '#007AFF',\n            todayTextColor: '#007AFF',\n            arrowColor: '#007AFF'\n          }\n        })]\n      })\n    })]\n  });\n};\nexport default Calendar_My;","map":{"version":3,"names":["React","useState","Calendar","styles","Modal","Text","TouchableOpacity","View","jsx","_jsx","jsxs","_jsxs","Calendar_My","_useState","_useState2","_slicedToArray","isCalendarVisible","setIsCalendarVisible","_useState3","_useState4","startDate","setStartDate","_useState5","_useState6","endDate","setEndDate","_useState7","_useState8","markedDates","setMarkedDates","onDayPress","day","dateString","_defineProperty","startingDay","color","textColor","selected","range","start","Date","end","endingDay","setTimeout","getNights","Math","ceil","getTime","children","style","dateRow","onPress","dateItem","label","dateText","substring","nightBadge","nightText","visible","animationType","flex","paddingTop","modalHeader","modalTitle","markingType","minDate","toISOString","split","theme","selectedDayBackgroundColor","todayTextColor","arrowColor"],"sources":["F:/hotel_booking_platform/apps/mobile/src/components/Calendar_My/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Calendar } from 'react-native-calendars';\r\nimport { styles } from './index.styles';\r\n\r\nimport {\r\n    Modal,\r\n    Text,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native';\r\n\r\n\r\nconst Calendar_My = () => {\r\n\r\n    // ... 在组件内部 ...\r\n    const [isCalendarVisible, setIsCalendarVisible] = useState(false);\r\n    const [startDate, setStartDate] = useState('2024-05-01');\r\n    const [endDate, setEndDate] = useState('2024-05-03');\r\n    const [markedDates, setMarkedDates] = useState({});\r\n\r\n    // 处理日期点击\r\n    const onDayPress = (day: any) => {\r\n        if (!startDate || (startDate && endDate)) {\r\n            // 重置，选择第一个点\r\n            setStartDate(day.dateString);\r\n            setEndDate('');\r\n            setMarkedDates({\r\n                [day.dateString]: { startingDay: true, color: '#007AFF', textColor: 'white', selected: true }\r\n            });\r\n        } else {\r\n            // 选择第二个点，形成范围\r\n            if (day.dateString < startDate) {\r\n                setStartDate(day.dateString); // 如果选的比开始早，就当成开始\r\n                return;\r\n            }\r\n            setEndDate(day.dateString);\r\n\r\n            // 生成中间高亮的范围\r\n            let range: any = {};\r\n            let start = new Date(startDate);\r\n            let end = new Date(day.dateString);\r\n\r\n            // 循环生成中间的日期样式（这里演示逻辑，实际可用循环填充）\r\n            setMarkedDates({\r\n                [startDate]: { startingDay: true, color: '#007AFF', textColor: 'white' },\r\n                [day.dateString]: { endingDay: true, color: '#007AFF', textColor: 'white' },\r\n                // 中间部分... (此处省略中间日期的 loop 填充逻辑)\r\n            });\r\n\r\n            setTimeout(() => setIsCalendarVisible(false), 300); // 选完自动关闭\r\n        }\r\n    };\r\n\r\n    // 计算晚数\r\n    const getNights = () => {\r\n        if (!startDate || !endDate) return 1;\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n        return Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\r\n    };\r\n\r\n    return (\r\n        <View>\r\n            {/* c. 入住日期选择 */}\r\n            <TouchableOpacity style={styles.dateRow} onPress={() => setIsCalendarVisible(true)}>\r\n                <View style={styles.dateItem}>\r\n                    <Text style={styles.label}>入住</Text>\r\n                    <Text style={styles.dateText}>{startDate.substring(5)}</Text>\r\n                </View>\r\n                <View style={styles.nightBadge}>\r\n                    <Text style={styles.nightText}>{getNights()}晚</Text>\r\n                </View>\r\n                <View style={styles.dateItem}>\r\n                    <Text style={styles.label}>离店</Text>\r\n                    <Text style={styles.dateText}>{endDate ? endDate.substring(5) : '请选择'}</Text>\r\n                </View>\r\n            </TouchableOpacity>\r\n\r\n            {/* 日历 Modal */}\r\n            <Modal visible={isCalendarVisible} animationType=\"slide\">\r\n                <View style={{ flex: 1, paddingTop: 50 }}>\r\n                    <View style={styles.modalHeader}>\r\n                        <Text style={styles.modalTitle}>选择入离日期</Text>\r\n                        <TouchableOpacity onPress={() => setIsCalendarVisible(false)}>\r\n                            <Text>关闭</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <Calendar\r\n                        markingType={'period'}\r\n                        markedDates={markedDates}\r\n                        onDayPress={onDayPress}\r\n                        minDate={new Date().toISOString().split('T')[0]} // 不能选今天之前\r\n                        theme={{\r\n                            selectedDayBackgroundColor: '#007AFF',\r\n                            todayTextColor: '#007AFF',\r\n                            arrowColor: '#007AFF',\r\n                        }}\r\n                    />\r\n                </View>\r\n            </Modal>\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default Calendar_My;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}