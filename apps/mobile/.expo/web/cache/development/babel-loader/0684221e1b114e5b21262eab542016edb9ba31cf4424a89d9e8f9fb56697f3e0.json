{"ast":null,"code":"\"use strict\";\n\nimport * as React from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport useLatestCallback from 'use-latest-callback';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar FrameContext = React.createContext(undefined);\nexport function useFrameSize(selector, throttle) {\n  var context = React.useContext(FrameContext);\n  if (context == null) {\n    throw new Error('useFrameSize must be used within a FrameSizeProvider');\n  }\n  var value = useSyncExternalStoreWithSelector(throttle ? context.subscribeThrottled : context.subscribe, context.getCurrent, context.getCurrent, selector);\n  return value;\n}\nexport function FrameSizeProvider(_ref) {\n  var initialFrame = _ref.initialFrame,\n    render = _ref.render;\n  var frameRef = React.useRef({\n    width: initialFrame.width,\n    height: initialFrame.height\n  });\n  var listeners = React.useRef(new Set());\n  var getCurrent = useLatestCallback(function () {\n    return frameRef.current;\n  });\n  var subscribe = useLatestCallback(function (listener) {\n    listeners.current.add(listener);\n    return function () {\n      listeners.current.delete(listener);\n    };\n  });\n  var subscribeThrottled = useLatestCallback(function (listener) {\n    var delay = 100;\n    var timer;\n    var updated = false;\n    var waiting = false;\n    var throttledListener = function throttledListener() {\n      clearTimeout(timer);\n      updated = true;\n      if (waiting) {\n        timer = setTimeout(function () {\n          if (updated) {\n            updated = false;\n            listener();\n          }\n        }, delay);\n      } else {\n        waiting = true;\n        setTimeout(function () {\n          waiting = false;\n        }, delay);\n        updated = false;\n        listener();\n      }\n    };\n    var unsubscribe = subscribe(throttledListener);\n    return function () {\n      unsubscribe();\n      clearTimeout(timer);\n    };\n  });\n  var context = React.useMemo(function () {\n    return {\n      getCurrent: getCurrent,\n      subscribe: subscribe,\n      subscribeThrottled: subscribeThrottled\n    };\n  }, [subscribe, subscribeThrottled, getCurrent]);\n  var onChange = useLatestCallback(function (frame) {\n    if (frameRef.current.height === frame.height && frameRef.current.width === frame.width) {\n      return;\n    }\n    frameRef.current = {\n      width: frame.width,\n      height: frame.height\n    };\n    listeners.current.forEach(function (listener) {\n      return listener();\n    });\n  });\n  var viewRef = React.useRef(null);\n  React.useEffect(function () {\n    var _viewRef$current;\n    if (Platform.OS === 'web') {\n      return;\n    }\n    (_viewRef$current = viewRef.current) == null ? void 0 : _viewRef$current.measure(function (_x, _y, width, height) {\n      onChange({\n        width: width,\n        height: height\n      });\n    });\n  }, [onChange]);\n  var onLayout = function onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n      width = _event$nativeEvent$la.width,\n      height = _event$nativeEvent$la.height;\n    onChange({\n      width: width,\n      height: height\n    });\n  };\n  return _jsxs(FrameContext.Provider, {\n    value: context,\n    children: [Platform.OS === 'web' ? _jsx(FrameSizeListenerWeb, {\n      onChange: onChange\n    }) : null, render({\n      ref: viewRef,\n      onLayout: onLayout\n    })]\n  });\n}\nfunction FrameSizeListenerWeb(_ref2) {\n  var onChange = _ref2.onChange;\n  var elementRef = React.useRef(null);\n  React.useEffect(function () {\n    if (elementRef.current == null) {\n      return;\n    }\n    var rect = elementRef.current.getBoundingClientRect();\n    onChange({\n      width: rect.width,\n      height: rect.height\n    });\n    var observer = new ResizeObserver(function (entries) {\n      var entry = entries[0];\n      if (entry) {\n        var _entry$contentRect = entry.contentRect,\n          width = _entry$contentRect.width,\n          height = _entry$contentRect.height;\n        onChange({\n          width: width,\n          height: height\n        });\n      }\n    });\n    observer.observe(elementRef.current);\n    return function () {\n      observer.disconnect();\n    };\n  }, [onChange]);\n  return _jsx(\"div\", {\n    ref: elementRef,\n    style: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      pointerEvents: 'none',\n      visibility: 'hidden'\n    }\n  });\n}","map":{"version":3,"names":["React","Platform","useLatestCallback","useSyncExternalStoreWithSelector","jsx","_jsx","jsxs","_jsxs","FrameContext","createContext","undefined","useFrameSize","selector","throttle","context","useContext","Error","value","subscribeThrottled","subscribe","getCurrent","FrameSizeProvider","_ref","initialFrame","render","frameRef","useRef","width","height","listeners","Set","current","listener","add","delete","delay","timer","updated","waiting","throttledListener","clearTimeout","setTimeout","unsubscribe","useMemo","onChange","frame","forEach","viewRef","useEffect","_viewRef$current","OS","measure","_x","_y","onLayout","event","_event$nativeEvent$la","nativeEvent","layout","Provider","children","FrameSizeListenerWeb","ref","_ref2","elementRef","rect","getBoundingClientRect","observer","ResizeObserver","entries","entry","_entry$contentRect","contentRect","observe","disconnect","style","position","left","right","top","bottom","pointerEvents","visibility"],"sources":["F:\\hotel_booking_platform\\apps\\mobile\\node_modules\\@react-navigation\\elements\\src\\useFrameSize.tsx"],"sourcesContent":["import * as React from 'react';\nimport { type LayoutChangeEvent, Platform, View } from 'react-native';\nimport useLatestCallback from 'use-latest-callback';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector';\n\ntype Frame = {\n  width: number;\n  height: number;\n};\n\ntype Listener = () => void;\n\ntype RemoveListener = () => void;\n\ntype FrameContextType = {\n  getCurrent: () => Frame;\n  subscribe: (listener: Listener) => RemoveListener;\n  subscribeThrottled: (listener: Listener) => RemoveListener;\n};\n\nconst FrameContext = React.createContext<FrameContextType | undefined>(\n  undefined\n);\n\nexport function useFrameSize<T>(\n  selector: (frame: Frame) => T,\n  throttle?: boolean\n): T {\n  const context = React.useContext(FrameContext);\n\n  if (context == null) {\n    throw new Error('useFrameSize must be used within a FrameSizeProvider');\n  }\n\n  const value = useSyncExternalStoreWithSelector(\n    throttle ? context.subscribeThrottled : context.subscribe,\n    context.getCurrent,\n    context.getCurrent,\n    selector\n  );\n\n  return value;\n}\n\ntype FrameSizeProviderProps = {\n  initialFrame: Frame;\n  render: (props: {\n    ref: React.RefObject<View | null>;\n    onLayout: (event: LayoutChangeEvent) => void;\n  }) => React.ReactNode;\n};\n\nexport function FrameSizeProvider({\n  initialFrame,\n  render,\n}: FrameSizeProviderProps) {\n  const frameRef = React.useRef<Frame>({\n    width: initialFrame.width,\n    height: initialFrame.height,\n  });\n\n  const listeners = React.useRef<Set<Listener>>(new Set());\n\n  const getCurrent = useLatestCallback(() => frameRef.current);\n\n  const subscribe = useLatestCallback((listener: Listener): RemoveListener => {\n    listeners.current.add(listener);\n\n    return () => {\n      listeners.current.delete(listener);\n    };\n  });\n\n  const subscribeThrottled = useLatestCallback(\n    (listener: Listener): RemoveListener => {\n      const delay = 100; // Throttle delay in milliseconds\n\n      let timer: ReturnType<typeof setTimeout>;\n      let updated = false;\n      let waiting = false;\n\n      const throttledListener = () => {\n        clearTimeout(timer);\n\n        updated = true;\n\n        if (waiting) {\n          // Schedule a timer to call the listener at the end\n          timer = setTimeout(() => {\n            if (updated) {\n              updated = false;\n              listener();\n            }\n          }, delay);\n        } else {\n          waiting = true;\n          setTimeout(function () {\n            waiting = false;\n          }, delay);\n\n          // Call the listener immediately at start\n          updated = false;\n          listener();\n        }\n      };\n\n      const unsubscribe = subscribe(throttledListener);\n\n      return () => {\n        unsubscribe();\n        clearTimeout(timer);\n      };\n    }\n  );\n\n  const context = React.useMemo<FrameContextType>(\n    () => ({\n      getCurrent,\n      subscribe,\n      subscribeThrottled,\n    }),\n    [subscribe, subscribeThrottled, getCurrent]\n  );\n\n  const onChange = useLatestCallback((frame: Frame) => {\n    if (\n      frameRef.current.height === frame.height &&\n      frameRef.current.width === frame.width\n    ) {\n      return;\n    }\n\n    frameRef.current = { width: frame.width, height: frame.height };\n    listeners.current.forEach((listener) => listener());\n  });\n\n  const viewRef = React.useRef<View>(null);\n\n  React.useEffect(() => {\n    if (Platform.OS === 'web') {\n      // We use ResizeObserver on web\n      return;\n    }\n\n    viewRef.current?.measure((_x, _y, width, height) => {\n      onChange({ width, height });\n    });\n  }, [onChange]);\n\n  const onLayout = (event: LayoutChangeEvent) => {\n    const { width, height } = event.nativeEvent.layout;\n\n    onChange({ width, height });\n  };\n\n  return (\n    <FrameContext.Provider value={context}>\n      {Platform.OS === 'web' ? (\n        <FrameSizeListenerWeb onChange={onChange} />\n      ) : null}\n      {render({ ref: viewRef, onLayout })}\n    </FrameContext.Provider>\n  );\n}\n\n// FIXME: On the Web, `onLayout` doesn't fire on resize\n// So we workaround this by using ResizeObserver\nfunction FrameSizeListenerWeb({\n  onChange,\n}: {\n  onChange: (frame: Frame) => void;\n}) {\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (elementRef.current == null) {\n      return;\n    }\n\n    const rect = elementRef.current.getBoundingClientRect();\n\n    onChange({\n      width: rect.width,\n      height: rect.height,\n    });\n\n    const observer = new ResizeObserver((entries) => {\n      const entry = entries[0];\n\n      if (entry) {\n        const { width, height } = entry.contentRect;\n\n        onChange({ width, height });\n      }\n    });\n\n    observer.observe(elementRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [onChange]);\n\n  return (\n    <div\n      ref={elementRef}\n      style={{\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        pointerEvents: 'none',\n        visibility: 'hidden',\n      }}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}